spring.application.name=springboot

# force restart removes all catched data; this is essential when the database names are changed
spring.datasource.url=jdbc:postgresql://localhost:5432/clamped
spring.datasource.username=postgres
spring.datasource.password=851686
spring.datasource.driver-class-name=org.postgresql.Driver
# update will leave the code and database data (post and puts) untouched
# create-drop will restart all the schemas and databases (deletes them when app is not running)

# ========== Hibernate/JPA Management ==========
spring.jpa.show-sql=true
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.transaction.jta.platform=true

spring.jpa.hibernate.ddl-auto=create-drop
server.error.include-message=always


# ========== Session Management ==========
spring.session.store-type=jdbc
# Auto-create SPRING_SESSION tables (once)
# spring.sql.init.schema-locations=classpath:spring-session-schema.sql
# change to 'never' in prod after table is created
spring.session.jdbc.initialize-schema=always

# Optional: session timeout (DB session lifetime)
server.servlet.session.timeout=7d

# Optional: secure cookie settings
server.servlet.session.cookie.http-only=false
# False for dev stage
server.servlet.session.cookie.name=JSESSIONID

# Remove SameSite=None and keep secure=false for local dev
server.servlet.session.cookie.secure=false
# server.servlet.session.cookie.same-site=None  # Comment this out
server.servlet.session.cookie.same-site=Lax

# Run cleanup for expired sessions (which die after 7 days) every 5 minutes instead of 1 minute (optional)
spring.session.jdbc.cleanup-cron=0 */5 * * * *

# Cookie survives reloads for 7 days (JSESSION ID LIFETIME)
server.servlet.session.cookie.max-age=7d
# Link to postgres (we dont want this cuz we havnt generated anything from postgres)
# spring.session.jdbc.platform=postgres


# Debug logging for session initialization
# logging.level.org.springframework.session=DEBUG
# logging.level.org.springframework.jdbc.datasource.init=DEBUG
# logging.level.org.springframework.boot.autoconfigure.session=DEBUG
# logging.level.org.springframework.session.jdbc=DEBUG
# logging.level.org.springframework.session.jdbc.config.annotation.web.http=DEBUG
logging.level.org.springframework.security=DEBUG
logging.level.com.brentcodes=DEBUG
# Shows Spring JDBC queries like session cleanup
logging.level.org.springframework.jdbc.core.JdbcTemplate=DEBUG



# Also enable SQL logging to see if table creation is attempted
# logging.level.org.springframework.jdbc=DEBUG
